{"remainingRequest":"/Users/yanagi/programming/live-chat-vuejs/node_modules/babel-loader/lib/index.js!/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanagi/programming/live-chat-vuejs/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/yanagi/programming/live-chat-vuejs/src/components/Navbar.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yanagi/programming/live-chat-vuejs/src/components/Navbar.vue","mtime":1638148207305},{"path":"/Users/yanagi/programming/live-chat-vuejs/babel.config.js","mtime":1637909021919},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/babel-loader/lib/index.js","mtime":1637908770962},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/vue-loader-v16/dist/index.js","mtime":1637908768201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5hZ2kvcHJvZ3JhbW1pbmcvbGl2ZS1jaGF0LXZ1ZWpzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpLAogICAgICBlbWFpbDogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKSwKICAgICAgZXJyb3I6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmRlbGV0ZSgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2F1dGgvc2lnbl9vdXQnLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICB1aWQ6IF90aGlzLmVtYWlsLAogICAgICAgICAgICAgICAgICAgICJhY2Nlc3MtdG9rZW4iOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzcy10b2tlbicpLAogICAgICAgICAgICAgICAgICAgIGNsaWVudDogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbGllbnQnKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlcykgewogICAgICAgICAgICAgICAgICBuZXcgRXJyb3IoJ+ODreOCsOOCouOCpuODiOOBp+OBjeOBvuOBm+OCk+OBp+OBl+OBnycpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuODreOCsOOCouOCpuODiOOBl+OBvuOBl+OBnyIpOwogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzcy10b2tlbicpOwogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NsaWVudCcpOwogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VpZCcpOwogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ25hbWUnKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1dlbGNvbWUnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSAn44Ot44Kw44Ki44Km44OI44Gn44GN44G+44Gb44KT44Gn44GX44GfJzsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/yanagi/programming/live-chat-vuejs/src/components/Navbar.vue"],"names":[],"mappings":";;AAYA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACb,EAAA,IADa,kBACL;AACN,WAAO;AACL,MAAA,IAAI,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,MAA5B,CADD;AAEL,MAAA,KAAK,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,KAA5B,CAFF;AAGL,MAAA,KAAK,EAAE;AAHF,KAAP;AAKD,GAPY;AAQb,EAAA,OAAO,EAAE;AACD,IAAA,MADC,oBACS;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,gBAAA,KAAI,CAAC,KAAL,GAAa,IAAb;AADc;AAAA;AAAA,uBAGM,KAAK,CAAC,MAAN,CAAa,qCAAb,EAAoD;AACpE,kBAAA,OAAO,EAAE;AACP,oBAAA,GAAG,EAAE,KAAI,CAAC,KADH;AAEP,oCAAgB,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,cAA5B,CAFT;AAGP,oBAAA,MAAM,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,QAA5B;AAHD;AAD2D,iBAApD,CAHN;;AAAA;AAGN,gBAAA,GAHM;;AAUZ,oBAAI,CAAC,GAAL,EAAU;AACR,sBAAI,KAAJ,CAAU,eAAV;AACF;;AAEA,oBAAI,CAAC,KAAI,CAAC,KAAV,EAAiB;AACf,kBAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AACA,kBAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,cAA/B;AACA,kBAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,QAA/B;AACA,kBAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,KAA/B;AACA,kBAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,MAA/B;;AACA,kBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,oBAAA,IAAI,EAAE;AAAR,mBAAlB;AACF;;AArBY,iDAsBL,GAtBK;;AAAA;AAAA;AAAA;AAwBZ,gBAAA,KAAI,CAAC,KAAL,GAAa,eAAb;;AAxBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BhB;AA3BO;AARI,CAAf","sourcesContent":["<template>\n  <nav>\n    <div>\n      <p>こんにちは、<span class=\"name\">{{ name }}</span>さん</p>\n      <p class=\"email\">現在、{{ email }}でログイン中です</p>\n      <div class=\"error\">{{ error }}</div>\n    </div>\n    <button @click=\"logout\">ログアウト</button>\n  </nav>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  data () {\n    return {\n      name: window.localStorage.getItem('name'),\n      email: window.localStorage.getItem('uid'),\n      error: null\n    }\n  },\n  methods: {\n    async logout () {\n      this.error = null\n      try {\n        const res = await axios.delete('http://localhost:3000/auth/sign_out', {\n          headers: {\n            uid: this.email,\n            \"access-token\": window.localStorage.getItem('access-token'),\n            client: window.localStorage.getItem('client')\n          }\n        })\n        if (!res) {\n          new Error('ログアウトできませんでした')\n        }\n\n        if (!this.error) {\n          console.log(\"ログアウトしました\")\n          window.localStorage.removeItem('access-token')\n          window.localStorage.removeItem('client')\n          window.localStorage.removeItem('uid')\n          window.localStorage.removeItem('name')\n          this.$router.push({ name: 'Welcome'})\n        }\n        return res\n      } catch (error) {\n        this.error = 'ログアウトできませんでした'\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\nnav {\n  padding: 20px;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\nnav p {\n  margin: 2px auto;\n  font-size: 16px;\n  color: #444;\n}\nnav p.email {\n  font-size: 14px;\n  color: #999;\n}\n</style>\n"],"sourceRoot":""}]}