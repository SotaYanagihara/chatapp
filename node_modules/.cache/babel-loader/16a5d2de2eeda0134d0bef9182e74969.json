{"remainingRequest":"/Users/yanagi/programming/live-chat-vuejs/node_modules/babel-loader/lib/index.js!/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanagi/programming/live-chat-vuejs/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/yanagi/programming/live-chat-vuejs/src/components/LoginForm.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yanagi/programming/live-chat-vuejs/src/components/LoginForm.vue","mtime":1638146691785},{"path":"/Users/yanagi/programming/live-chat-vuejs/babel.config.js","mtime":1637909021919},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/babel-loader/lib/index.js","mtime":1637908770962},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/vue-loader-v16/dist/index.js","mtime":1637908768201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5hZ2kvcHJvZ3JhbW1pbmcvbGl2ZS1jaGF0LXZ1ZWpzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHNldEl0ZW0gZnJvbSAnLi4vYXV0aC9zZXRJdGVtJzsKZXhwb3J0IGRlZmF1bHQgewogIGVtaXRzOiBbJ3JlZGlyZWN0VG9DaGF0Um9vbSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZXJyb3I6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXV0aC9zaWduX2luJywgewogICAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXMuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfjg6Hjg7zjg6vjgqLjg4njg6zjgrnjgYvjg5Hjgrnjg6/jg7zjg4njgYzpgZXjgYTjgb7jgZknKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5lcnJvcikgewogICAgICAgICAgICAgICAgICBzZXRJdGVtKHJlcy5oZWFkZXJzLCByZXMuZGF0YS5kYXRhLm5hbWUpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ3JlZGlyZWN0VG9DaGF0Um9vbScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICAgICAgICAgICAgcmVzOiByZXMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh7CiAgICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dC50MAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9ICfjg6Hjg7zjg6vjgqLjg4njg6zjgrnjgYvjg5Hjgrnjg6/jg7zjg4njgYzpgZXjgYTjgb7jgZknOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAxMl1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/yanagi/programming/live-chat-vuejs/src/components/LoginForm.vue"],"names":[],"mappings":";;;AAWA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,OAAP,MAAoB,iBAApB;AACA,eAAe;AACb,EAAA,KAAK,EAAE,CAAC,oBAAD,CADM;AAEb,EAAA,IAFa,kBAEL;AACN,WAAO;AACL,MAAA,KAAK,EAAE,EADF;AAEL,MAAA,QAAQ,EAAE,EAFL;AAGL,MAAA,KAAK,EAAE;AAHF,KAAP;AAKD,GARY;AASb,EAAA,OAAO,EAAE;AACD,IAAA,KADC,mBACO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEV,gBAAA,KAAI,CAAC,KAAL,GAAa,IAAb;AAFU;AAAA,uBAIQ,KAAK,CAAC,IAAN,CAAW,oCAAX,EAAiD;AACjE,kBAAA,KAAK,EAAE,KAAI,CAAC,KADqD;AAEjE,kBAAA,QAAQ,EAAE,KAAI,CAAC;AAFkD,iBAAjD,CAJR;;AAAA;AAIJ,gBAAA,GAJI;;AAAA,oBASL,GATK;AAAA;AAAA;AAAA;;AAAA,sBAUF,IAAI,KAAJ,CAAU,oBAAV,CAVE;;AAAA;AAYV,oBAAI,CAAC,KAAI,CAAC,KAAV,EAAiB;AACf,kBAAA,OAAO,CAAC,GAAG,CAAC,OAAL,EAAc,GAAG,CAAC,IAAJ,CAAS,IAAT,CAAc,IAA5B,CAAP;;AACA,kBAAA,KAAI,CAAC,KAAL,CAAW,oBAAX;AACF;;AAEA,gBAAA,OAAO,CAAC,GAAR,CAAY;AAAE,kBAAA,GAAE,EAAF;AAAF,iBAAZ;AAjBU,iDAkBH,GAlBG;;AAAA;AAAA;AAAA;AAoBV,gBAAA,OAAO,CAAC,GAAR,CAAY;AAAE,kBAAA,KAAI;AAAN,iBAAZ;AACA,gBAAA,KAAI,CAAC,KAAL,GAAa,oBAAb;;AArBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBd;AAxBO;AATI,CAAf","sourcesContent":["<template>\n  <h2>ログイン</h2>\n  <form @submit.prevent=\"login\">\n    <input type=\"email\" required placeholder=\"メールアドレス\" v-model=\"email\">\n    <input type=\"password\" required placeholder=\"パスワード\" v-model=\"password\">\n    <div class=\"error\">{{ error }}</div>\n    <button>ログインする</button>\n  </form>\n</template>\n\n<script>\nimport axios from 'axios'\nimport setItem from '../auth/setItem'\nexport default {\n  emits: ['redirectToChatRoom'],\n  data () {\n    return {\n      email: '',\n      password: '',\n      error: null\n    }\n  },\n  methods: {\n    async login() {\n      try {\n        this.error = null\n\n        const res = await axios.post('http://localhost:3000/auth/sign_in', {\n          email: this.email,\n          password: this.password,\n          }\n        )\n        if (!res) {\n          throw new Error('メールアドレスかパスワードが違います')\n        }\n        if (!this.error) {\n          setItem(res.headers, res.data.data.name)\n          this.$emit('redirectToChatRoom')\n        }\n\n        console.log({ res })\n        return res\n      } catch (error) {\n        console.log({ error })\n        this.error = 'メールアドレスかパスワードが違います'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n</style>\n"],"sourceRoot":""}]}