{"remainingRequest":"/Users/yanagi/chatapp/live-chat-rails/node_modules/babel-loader/lib/index.js!/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanagi/chatapp/live-chat-rails/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/yanagi/chatapp/live-chat-rails/src/components/Navbar.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yanagi/chatapp/live-chat-rails/src/components/Navbar.vue","mtime":1638957531382},{"path":"/Users/yanagi/chatapp/live-chat-rails/babel.config.js","mtime":1637909021919},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/babel-loader/lib/index.js","mtime":1637908770962},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/vue-loader-v16/dist/index.js","mtime":1637908768201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5hZ2kvY2hhdGFwcC9saXZlLWNoYXQtcmFpbHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByZW1vdmVJdGVtIGZyb20gJy4uL2F1dGgvcmVtb3ZlSXRlbSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCduYW1lJyksCiAgICAgIGVtYWlsOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VpZCcpLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gbnVsbDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZGVsZXRlKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXV0aC9zaWduX291dCcsIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIHVpZDogX3RoaXMuZW1haWwsCiAgICAgICAgICAgICAgICAgICAgImFjY2Vzcy10b2tlbiI6IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzLXRva2VuJyksCiAgICAgICAgICAgICAgICAgICAgY2xpZW50OiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NsaWVudCcpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzKSB7CiAgICAgICAgICAgICAgICAgIG5ldyBFcnJvcign44Ot44Kw44Ki44Km44OI44Gn44GN44G+44Gb44KT44Gn44GX44GfJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5lcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi44Ot44Kw44Ki44Km44OI44GX44G+44GX44GfIik7CiAgICAgICAgICAgICAgICAgIHJlbW92ZUl0ZW0oKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1dlbGNvbWUnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSAn44Ot44Kw44Ki44Km44OI44Gn44GN44G+44Gb44KT44Gn44GX44GfJzsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/yanagi/chatapp/live-chat-rails/src/components/Navbar.vue"],"names":[],"mappings":";;AAYA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,UAAP,MAAuB,oBAAvB;AACA,eAAe;AACb,EAAA,IADa,kBACL;AACN,WAAO;AACL,MAAA,IAAI,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,MAA5B,CADD;AAEL,MAAA,KAAK,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,KAA5B,CAFF;AAGL,MAAA,KAAK,EAAE;AAHF,KAAP;AAKD,GAPY;AAQb,EAAA,OAAO,EAAE;AACD,IAAA,MADC,oBACS;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,gBAAA,KAAI,CAAC,KAAL,GAAa,IAAb;AADc;AAAA;AAAA,uBAGM,KAAK,CAAC,MAAN,CAAa,qCAAb,EAAoD;AACpE,kBAAA,OAAO,EAAE;AACP,oBAAA,GAAG,EAAE,KAAI,CAAC,KADH;AAEP,oCAAgB,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,cAA5B,CAFT;AAGP,oBAAA,MAAM,EAAE,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA4B,QAA5B;AAHD;AAD2D,iBAApD,CAHN;;AAAA;AAGN,gBAAA,GAHM;;AAUZ,oBAAI,CAAC,GAAL,EAAU;AACR,sBAAI,KAAJ,CAAU,eAAV;AACF;;AAEA,oBAAI,CAAC,KAAI,CAAC,KAAV,EAAiB;AACf,kBAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AACA,kBAAA,UAAU;;AACV,kBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,oBAAA,IAAI,EAAE;AAAR,mBAAlB;AACF;;AAlBY,iDAmBL,GAnBK;;AAAA;AAAA;AAAA;AAqBZ,gBAAA,KAAI,CAAC,KAAL,GAAa,eAAb;;AArBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBhB;AAxBO;AARI,CAAf","sourcesContent":["<template>\n  <nav>\n    <div>\n      <p>こんにちは、<span class=\"name\">{{ name }}</span>さん</p>\n      <p class=\"email\">現在、{{ email }}でログイン中です</p>\n      <div class=\"error\">{{ error }}</div>\n    </div>\n    <button @click=\"logout\">ログアウト</button>\n  </nav>\n</template>\n\n<script>\nimport axios from 'axios'\nimport removeItem from '../auth/removeItem'\nexport default {\n  data () {\n    return {\n      name: window.localStorage.getItem('name'),\n      email: window.localStorage.getItem('uid'),\n      error: null\n    }\n  },\n  methods: {\n    async logout () {\n      this.error = null\n      try {\n        const res = await axios.delete('http://localhost:3000/auth/sign_out', {\n          headers: {\n            uid: this.email,\n            \"access-token\": window.localStorage.getItem('access-token'),\n            client: window.localStorage.getItem('client')\n          }\n        })\n        if (!res) {\n          new Error('ログアウトできませんでした')\n        }\n\n        if (!this.error) {\n          console.log(\"ログアウトしました\")\n          removeItem()\n          this.$router.push({ name: 'Welcome'})\n        }\n        return res\n      } catch (error) {\n        this.error = 'ログアウトできませんでした'\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\nnav {\n  padding: 20px;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\nnav p {\n  margin: 2px auto;\n  font-size: 16px;\n  color: #444;\n}\nnav p.email {\n  font-size: 14px;\n  color: #999;\n}\n</style>\n"],"sourceRoot":""}]}