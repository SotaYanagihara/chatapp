{"remainingRequest":"/Users/yanagi/chatapp/live-chat-rails/node_modules/babel-loader/lib/index.js!/Users/yanagi/chatapp/live-chat-rails/node_modules/eslint-loader/index.js??ref--14-0!/Users/yanagi/chatapp/live-chat-rails/src/auth/validate.js","dependencies":[{"path":"/Users/yanagi/chatapp/live-chat-rails/src/auth/validate.js","mtime":1638957422907},{"path":"/Users/yanagi/chatapp/live-chat-rails/babel.config.js","mtime":1637909021919},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/babel-loader/lib/index.js","mtime":1637908770962},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/eslint-loader/index.js","mtime":1637908768210}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5hZ2kvY2hhdGFwcC9saXZlLWNoYXQtcmFpbHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCByZW1vdmVJdGVtIGZyb20gJy4vcmVtb3ZlSXRlbSc7CnZhciBlcnJvciA9IHJlZihudWxsKTsKCnZhciB2YWxpZGF0ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICB2YXIgdWlkLCBjbGllbnQsIGFjY2Vzc1Rva2VuLCByZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gbnVsbDsKICAgICAgICAgICAgdWlkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKTsKICAgICAgICAgICAgY2xpZW50ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbGllbnQnKTsKICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzcy10b2tlbicpOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hdXRoL3ZhbGlkYXRlX3Rva2VuJywgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIHVpZDogdWlkLAogICAgICAgICAgICAgICAgJ2FjY2Vzcy10b2tlbic6IGFjY2Vzc1Rva2VuLAogICAgICAgICAgICAgICAgY2xpZW50OiBjbGllbnQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6KqN6Ki844Gr5aSx5pWX44GX44G+44GX44GfJyk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzKTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNCk7CiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gJ+iqjeiovOOBq+WkseaVl+OBl+OBvuOBl+OBnyc7CiAgICAgICAgICAgIHJlbW92ZUl0ZW0oKTsKCiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNCwgMTNdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciB1c2VWYWxpZGF0ZSA9IGZ1bmN0aW9uIHVzZVZhbGlkYXRlKCkgewogIHJldHVybiB7CiAgICBlcnJvcjogZXJyb3IsCiAgICB2YWxpZGF0ZTogdmFsaWRhdGUKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgdXNlVmFsaWRhdGU7"},{"version":3,"sources":["/Users/yanagi/chatapp/live-chat-rails/src/auth/validate.js"],"names":["axios","ref","removeItem","error","validate","value","uid","window","localStorage","getItem","client","accessToken","get","headers","res","Error","useValidate"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,IAAMC,KAAK,GAAGF,GAAG,CAAC,IAAD,CAAjB;;AAEA,IAAMG,QAAQ;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACfD,YAAAA,KAAK,CAACE,KAAN,GAAc,IAAd;AACMC,YAAAA,GAFS,GAEHC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAA5B,CAFG;AAGTC,YAAAA,MAHS,GAGAH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAHA;AAITE,YAAAA,WAJS,GAIKJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAJL;AAAA;AAAA;AAAA,mBAOKT,KAAK,CAACY,GAAN,CAAU,2CAAV,EAAuD;AACvEC,cAAAA,OAAO,EAAE;AACPP,gBAAAA,GAAG,EAAEA,GADE;AAEP,gCAAgBK,WAFT;AAGPD,gBAAAA,MAAM,EAAEA;AAHD;AAD8D,aAAvD,CAPL;;AAAA;AAOPI,YAAAA,GAPO;;AAAA,gBAeRA,GAfQ;AAAA;AAAA;AAAA;;AAAA,kBAgBL,IAAIC,KAAJ,CAAU,WAAV,CAhBK;;AAAA;AAAA,6CAmBND,GAnBM;;AAAA;AAAA;AAAA;AAqBbX,YAAAA,KAAK,CAACE,KAAN,GAAc,WAAd;AACAH,YAAAA,UAAU;;AAtBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARE,QAAQ;AAAA;AAAA;AAAA,GAAd;;AA0BA,IAAMY,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,SAAO;AAAEb,IAAAA,KAAK,EAALA,KAAF;AAASC,IAAAA,QAAQ,EAARA;AAAT,GAAP;AACD,CAFD;;AAIA,eAAeY,WAAf","sourcesContent":["import axios from 'axios'\nimport { ref } from 'vue'\nimport removeItem from './removeItem'\nconst error = ref(null)\n\nconst validate = async () => {\n  error.value = null\n  const uid = window.localStorage.getItem('uid')\n  const client = window.localStorage.getItem('client')\n  const accessToken = window.localStorage.getItem('access-token')\n\n  try {\n    const res = await axios.get('http://localhost:3000/auth/validate_token', {\n      headers: {\n        uid: uid,\n        'access-token': accessToken,\n        client: client\n      }\n    })\n\n    if (!res) {\n      throw new Error('認証に失敗しました')\n    }\n\n    return res\n  } catch (err) {\n    error.value = '認証に失敗しました'\n    removeItem()\n  }\n}\n\nconst useValidate = () => {\n  return { error, validate }\n}\n\nexport default useValidate\n"]}]}