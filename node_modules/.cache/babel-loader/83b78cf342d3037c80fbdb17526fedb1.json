{"remainingRequest":"/Users/yanagi/programming/live-chat-vuejs/node_modules/babel-loader/lib/index.js!/Users/yanagi/programming/live-chat-vuejs/node_modules/eslint-loader/index.js??ref--14-0!/Users/yanagi/programming/live-chat-vuejs/src/router/index.js","dependencies":[{"path":"/Users/yanagi/programming/live-chat-vuejs/src/router/index.js","mtime":1638779131793},{"path":"/Users/yanagi/programming/live-chat-vuejs/babel.config.js","mtime":1637909021919},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/babel-loader/lib/index.js","mtime":1637908770962},{"path":"/Users/yanagi/programming/live-chat-vuejs/node_modules/eslint-loader/index.js","mtime":1637908768210}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5hZ2kvcHJvZ3JhbW1pbmcvbGl2ZS1jaGF0LXZ1ZWpzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IFdlbGNvbWUgZnJvbSAnLi4vdmlld3MvV2VsY29tZSc7CmltcG9ydCBDaGF0cm9vbSBmcm9tICcuLi92aWV3cy9DaGF0cm9vbSc7CmltcG9ydCB1c2VWYWxpZGF0ZSBmcm9tICcuLi9hdXRoL3ZhbGlkYXRlJzsKCnZhciBfdXNlVmFsaWRhdGUgPSB1c2VWYWxpZGF0ZSgpLAogICAgZXJyb3IgPSBfdXNlVmFsaWRhdGUuZXJyb3IsCiAgICB2YWxpZGF0ZSA9IF91c2VWYWxpZGF0ZS52YWxpZGF0ZTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCgoKdmFyIHJlcXVpcmVBdXRoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIHVpZCwgY2xpZW50LCBhY2Nlc3NUb2tlbjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdWlkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKTsKICAgICAgICAgICAgY2xpZW50ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbGllbnQnKTsKICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzcy10b2tlbicpOwoKICAgICAgICAgICAgaWYgKCEoIXVpZCB8fCAhY2xpZW50IHx8ICFhY2Nlc3NUb2tlbikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coJ+ODreOCsOOCpOODs+OBl+OBpuOBhOOBvuOBm+OCkycpOwogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBuYW1lOiAnV2VsY29tZScKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZSgpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgaWYgKGVycm9yLnZhbHVlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+iqjeiovOOBq+WkseaVl+OBl+OBvuOBl+OBnycpOwogICAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgICAgbmFtZTogJ1dlbGNvbWUnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiByZXF1aXJlQXV0aChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKdmFyIG5vUmVxdWlyZUF1dGggPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB1aWQsIGNsaWVudCwgYWNjZXNzVG9rZW47CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB1aWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VpZCcpOwogICAgICAgICAgICBjbGllbnQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NsaWVudCcpOwogICAgICAgICAgICBhY2Nlc3NUb2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzLXRva2VuJyk7CgogICAgICAgICAgICBpZiAoISghdWlkICYmICFjbGllbnQgJiYgIWFjY2Vzc1Rva2VuKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZSgpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgaWYgKCFlcnJvci52YWx1ZSkgewogICAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgICAgbmFtZTogJ0NoYXRyb29tJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIG5vUmVxdWlyZUF1dGgoX3g0LCBfeDUsIF94NikgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdXZWxjb21lJywKICBjb21wb25lbnQ6IFdlbGNvbWUsCiAgYmVmb3JlRW50ZXI6IG5vUmVxdWlyZUF1dGgKfSwgewogIHBhdGg6ICcvY2hhdHJvb20nLAogIG5hbWU6ICdDaGF0cm9vbScsCiAgY29tcG9uZW50OiBDaGF0cm9vbSwKICBiZWZvcmVFbnRlcjogcmVxdWlyZUF1dGgKfV07CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkocHJvY2Vzcy5lbnYuQkFTRV9VUkwpLAogIHJvdXRlczogcm91dGVzCn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/Users/yanagi/programming/live-chat-vuejs/src/router/index.js"],"names":["createRouter","createWebHistory","Welcome","Chatroom","useValidate","error","validate","requireAuth","to","from","next","uid","window","localStorage","getItem","client","accessToken","console","log","name","value","noRequireAuth","routes","path","component","beforeEnter","router","history","process","env","BASE_URL"],"mappings":";;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;;AAEA,mBAA4BA,WAAW,EAAvC;AAAA,IAAQC,KAAR,gBAAQA,KAAR;AAAA,IAAeC,QAAf,gBAAeA,QAAf,C,CAEA;;;AACA,IAAMC,WAAW;AAAA,qEAAG,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACZC,YAAAA,GADY,GACNC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAA5B,CADM;AAEZC,YAAAA,MAFY,GAEHH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAFG;AAGZE,YAAAA,WAHY,GAGEJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAHF;;AAAA,kBAKd,CAACH,GAAD,IAAQ,CAACI,MAAT,IAAmB,CAACC,WALN;AAAA;AAAA;AAAA;;AAMhBC,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAR,YAAAA,IAAI,CAAC;AAAES,cAAAA,IAAI,EAAE;AAAR,aAAD,CAAJ;AAPgB;;AAAA;AAAA;AAAA,mBAWZb,QAAQ,EAXI;;AAAA;AAalB,gBAAID,KAAK,CAACe,KAAV,EAAiB;AACfH,cAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAR,cAAAA,IAAI,CAAC;AAAES,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAJ;AACD,aAHD,MAGO;AACLT,cAAAA,IAAI;AACL;;AAlBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXH,WAAW;AAAA;AAAA;AAAA,GAAjB;;AAqBA,IAAMc,aAAa;AAAA,sEAAG,kBAAOb,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACdC,YAAAA,GADc,GACRC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAA5B,CADQ;AAEdC,YAAAA,MAFc,GAELH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAFK;AAGdE,YAAAA,WAHc,GAGAJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAHA;;AAAA,kBAKhB,CAACH,GAAD,IAAQ,CAACI,MAAT,IAAmB,CAACC,WALJ;AAAA;AAAA;AAAA;;AAMlBN,YAAAA,IAAI;AANc;;AAAA;AAAA;AAAA,mBAUdJ,QAAQ,EAVM;;AAAA;AAYpB,gBAAI,CAACD,KAAK,CAACe,KAAX,EAAkB;AAChBV,cAAAA,IAAI,CAAC;AAAES,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAJ;AACD,aAFD,MAEO;AACLT,cAAAA,IAAI;AACL;;AAhBmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbW,aAAa;AAAA;AAAA;AAAA,GAAnB;;AAmBA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEJ,EAAAA,IAAI,EAAE,SAFR;AAGEK,EAAAA,SAAS,EAAEtB,OAHb;AAIEuB,EAAAA,WAAW,EAAEJ;AAJf,CADa,EAOb;AACEE,EAAAA,IAAI,EAAE,WADR;AAEEJ,EAAAA,IAAI,EAAE,UAFR;AAGEK,EAAAA,SAAS,EAAErB,QAHb;AAIEsB,EAAAA,WAAW,EAAElB;AAJf,CAPa,CAAf;AAeA,IAAMmB,MAAM,GAAG1B,YAAY,CAAC;AAC1B2B,EAAAA,OAAO,EAAE1B,gBAAgB,CAAC2B,OAAO,CAACC,GAAR,CAAYC,QAAb,CADC;AAE1BR,EAAAA,MAAM,EAANA;AAF0B,CAAD,CAA3B;AAKA,eAAeI,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\nimport Welcome from '../views/Welcome'\nimport Chatroom from '../views/Chatroom'\nimport useValidate from '../auth/validate'\n\nconst { error, validate } = useValidate()\n\n// eslint-disable-next-line no-unused-vars\nconst requireAuth = async (to, from, next) => {\n  const uid = window.localStorage.getItem('uid')\n  const client = window.localStorage.getItem('client')\n  const accessToken = window.localStorage.getItem('access-token')\n\n  if (!uid || !client || !accessToken) {\n    console.log('ログインしていません')\n    next({ name: 'Welcome' })\n    return\n  }\n\n  await validate()\n\n  if (error.value) {\n    console.log('認証に失敗しました')\n    next({ name: 'Welcome' })\n  } else {\n    next()\n  }\n}\n\nconst noRequireAuth = async (to, from, next) => {\n  const uid = window.localStorage.getItem('uid')\n  const client = window.localStorage.getItem('client')\n  const accessToken = window.localStorage.getItem('access-token')\n\n  if (!uid && !client && !accessToken) {\n    next()\n    return\n  }\n\n  await validate()\n\n  if (!error.value) {\n    next({ name: 'Chatroom' })\n  } else {\n    next()\n  }\n}\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Welcome',\n    component: Welcome,\n    beforeEnter: noRequireAuth\n  },\n  {\n    path: '/chatroom',\n    name: 'Chatroom',\n    component: Chatroom,\n    beforeEnter: requireAuth\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\nexport default router\n"]}]}