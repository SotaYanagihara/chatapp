{"remainingRequest":"/Users/yanagi/chatapp/live-chat-rails/node_modules/babel-loader/lib/index.js!/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanagi/chatapp/live-chat-rails/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/yanagi/chatapp/live-chat-rails/src/components/LoginForm.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yanagi/chatapp/live-chat-rails/src/components/LoginForm.vue","mtime":1638146691785},{"path":"/Users/yanagi/chatapp/live-chat-rails/babel.config.js","mtime":1637909021919},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/babel-loader/lib/index.js","mtime":1637908770962},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/cache-loader/dist/cjs.js","mtime":1637908768660},{"path":"/Users/yanagi/chatapp/live-chat-rails/node_modules/vue-loader-v16/dist/index.js","mtime":1637908768201}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5hZ2kvY2hhdGFwcC9saXZlLWNoYXQtcmFpbHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc2V0SXRlbSBmcm9tICcuLi9hdXRoL3NldEl0ZW0nOwpleHBvcnQgZGVmYXVsdCB7CiAgZW1pdHM6IFsncmVkaXJlY3RUb0NoYXRSb29tJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gbnVsbDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hdXRoL3NpZ25faW4nLCB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBfdGhpcy5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ODoeODvOODq+OCouODieODrOOCueOBi+ODkeOCueODr+ODvOODieOBjOmBleOBhOOBvuOBmScpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgIHNldEl0ZW0ocmVzLmhlYWRlcnMsIHJlcy5kYXRhLmRhdGEubmFtZSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgncmVkaXJlY3RUb0NoYXRSb29tJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coewogICAgICAgICAgICAgICAgICByZXM6IHJlcwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXMpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0LnQwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gJ+ODoeODvOODq+OCouODieODrOOCueOBi+ODkeOCueODr+ODvOODieOBjOmBleOBhOOBvuOBmSc7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/yanagi/chatapp/live-chat-rails/src/components/LoginForm.vue"],"names":[],"mappings":";;;AAWA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,OAAP,MAAoB,iBAApB;AACA,eAAe;AACb,EAAA,KAAK,EAAE,CAAC,oBAAD,CADM;AAEb,EAAA,IAFa,kBAEL;AACN,WAAO;AACL,MAAA,KAAK,EAAE,EADF;AAEL,MAAA,QAAQ,EAAE,EAFL;AAGL,MAAA,KAAK,EAAE;AAHF,KAAP;AAKD,GARY;AASb,EAAA,OAAO,EAAE;AACD,IAAA,KADC,mBACO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEV,gBAAA,KAAI,CAAC,KAAL,GAAa,IAAb;AAFU;AAAA,uBAIQ,KAAK,CAAC,IAAN,CAAW,oCAAX,EAAiD;AACjE,kBAAA,KAAK,EAAE,KAAI,CAAC,KADqD;AAEjE,kBAAA,QAAQ,EAAE,KAAI,CAAC;AAFkD,iBAAjD,CAJR;;AAAA;AAIJ,gBAAA,GAJI;;AAAA,oBASL,GATK;AAAA;AAAA;AAAA;;AAAA,sBAUF,IAAI,KAAJ,CAAU,oBAAV,CAVE;;AAAA;AAYV,oBAAI,CAAC,KAAI,CAAC,KAAV,EAAiB;AACf,kBAAA,OAAO,CAAC,GAAG,CAAC,OAAL,EAAc,GAAG,CAAC,IAAJ,CAAS,IAAT,CAAc,IAA5B,CAAP;;AACA,kBAAA,KAAI,CAAC,KAAL,CAAW,oBAAX;AACF;;AAEA,gBAAA,OAAO,CAAC,GAAR,CAAY;AAAE,kBAAA,GAAE,EAAF;AAAF,iBAAZ;AAjBU,iDAkBH,GAlBG;;AAAA;AAAA;AAAA;AAoBV,gBAAA,OAAO,CAAC,GAAR,CAAY;AAAE,kBAAA,KAAI;AAAN,iBAAZ;AACA,gBAAA,KAAI,CAAC,KAAL,GAAa,oBAAb;;AArBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBd;AAxBO;AATI,CAAf","sourcesContent":["<template>\n  <h2>ログイン</h2>\n  <form @submit.prevent=\"login\">\n    <input type=\"email\" required placeholder=\"メールアドレス\" v-model=\"email\">\n    <input type=\"password\" required placeholder=\"パスワード\" v-model=\"password\">\n    <div class=\"error\">{{ error }}</div>\n    <button>ログインする</button>\n  </form>\n</template>\n\n<script>\nimport axios from 'axios'\nimport setItem from '../auth/setItem'\nexport default {\n  emits: ['redirectToChatRoom'],\n  data () {\n    return {\n      email: '',\n      password: '',\n      error: null\n    }\n  },\n  methods: {\n    async login() {\n      try {\n        this.error = null\n\n        const res = await axios.post('http://localhost:3000/auth/sign_in', {\n          email: this.email,\n          password: this.password,\n          }\n        )\n        if (!res) {\n          throw new Error('メールアドレスかパスワードが違います')\n        }\n        if (!this.error) {\n          setItem(res.headers, res.data.data.name)\n          this.$emit('redirectToChatRoom')\n        }\n\n        console.log({ res })\n        return res\n      } catch (error) {\n        console.log({ error })\n        this.error = 'メールアドレスかパスワードが違います'\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n</style>\n"],"sourceRoot":""}]}